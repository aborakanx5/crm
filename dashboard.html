<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ููุญุฉ ุชุญูู ูุญู ุงูููุงุจุณ ุงูุฑุฌุงููุฉ</title>
<style>
    body { font-family: Arial, sans-serif; background: #f5f5f5; margin: 0; padding: 0; }
    header { background: #333; color: white; padding: 10px; text-align: center; font-size: 20px; }
    section { padding: 15px; background: white; margin: 15px; border-radius: 10px; }
    input, select, button { padding: 5px; margin: 5px; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th, td { border: 1px solid #ccc; padding: 5px; text-align: center; }
    th { background: #eee; }
    canvas { background: white; margin-top: 20px; }
</style>
</head>
<body>

<header>๐ ููุญุฉ ุชุญูู ูุญู ุงูููุงุจุณ ุงูุฑุฌุงููุฉ</header>

<section>
<h3>ุฅุถุงูุฉ ูุตุฑูู</h3>
<input id="expenseId" placeholder="ุฑูู ุงูุตุฑู">
<input id="expenseName" placeholder="ุงุณู ุงูุตุฑู">
<input id="expenseType" placeholder="ููุน ุงูุตุฑู">
<input id="expenseAmount" type="number" placeholder="ุงููุจูุบ">
<input id="expenseDate" type="date">
<button onclick="addExpense()">ุฅุถุงูุฉ</button>
</section>

<section>
<h3>ุฅุถุงูุฉ ูุจูุนุงุช</h3>
<input id="saleAmount" type="number" placeholder="ุงููุจูุบ">
<input id="saleDate" type="date">
<button onclick="addSale()">ุฅุถุงูุฉ</button>
</section>

<section>
<h3>ุจุญุซ</h3>
<select id="filterMonth">
    <option value="">ูู ุงูุดููุฑ</option>
    <option value="01">ููุงูุฑ</option>
    <option value="02">ูุจุฑุงูุฑ</option>
    <option value="03">ูุงุฑุณ</option>
    <option value="04">ุฃุจุฑูู</option>
    <option value="05">ูุงูู</option>
    <option value="06">ููููู</option>
    <option value="07">ููููู</option>
    <option value="08">ุฃุบุณุทุณ</option>
    <option value="09">ุณุจุชูุจุฑ</option>
    <option value="10">ุฃูุชูุจุฑ</option>
    <option value="11">ููููุจุฑ</option>
    <option value="12">ุฏูุณูุจุฑ</option>
</select>
<input id="filterType" placeholder="ููุน ุงูุตุฑู">
<button onclick="renderData()">ุชุทุจูู ุงูููุชุฑ</button>
</section>

<section>
<h3>ุงููุตุงุฑูู</h3>
<table>
<thead>
<tr><th>ุฑูู</th><th>ุงุณู</th><th>ููุน</th><th>ุงููุจูุบ</th><th>ุงูุชุงุฑูุฎ</th></tr>
</thead>
<tbody id="expensesTable"></tbody>
</table>
</section>

<section>
<h3>ุงููุจูุนุงุช</h3>
<table>
<thead>
<tr><th>ุงููุจูุบ</th><th>ุงูุชุงุฑูุฎ</th></tr>
</thead>
<tbody id="salesTable"></tbody>
</table>
</section>

<section>
<h3>ุงูุฅุฌูุงููุงุช</h3>
<p id="totalExpenses">ุฅุฌูุงูู ุงููุตุงุฑูู: 0</p>
<p id="totalSales">ุฅุฌูุงูู ุงููุจูุนุงุช: 0</p>
<p id="netProfit">ุงูุฑุจุญ ุงูุตุงูู: 0</p>
</section>

<section>
<h3>ุชุญููู ุจูุงูู</h3>
<canvas id="chart" width="400" height="200"></canvas>
</section>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
let expenses = JSON.parse(localStorage.getItem("expenses") || "[]");
let sales = JSON.parse(localStorage.getItem("sales") || "[]");

function addExpense() {
    let id = document.getElementById("expenseId").value;
    let name = document.getElementById("expenseName").value;
    let type = document.getElementById("expenseType").value;
    let amount = parseFloat(document.getElementById("expenseAmount").value);
    let date = document.getElementById("expenseDate").value;
    if (!id || !name || !type || !amount || !date) return alert("ุฃููู ุงูุจูุงูุงุช");
    expenses.push({id, name, type, amount, date});
    localStorage.setItem("expenses", JSON.stringify(expenses));
    renderData();
}

function addSale() {
    let amount = parseFloat(document.getElementById("saleAmount").value);
    let date = document.getElementById("saleDate").value;
    if (!amount || !date) return alert("ุฃููู ุงูุจูุงูุงุช");
    sales.push({amount, date});
    localStorage.setItem("sales", JSON.stringify(sales));
    renderData();
}

function renderData() {
    let monthFilter = document.getElementById("filterMonth").value;
    let typeFilter = document.getElementById("filterType").value;

    let filteredExpenses = expenses.filter(e =>
        (!monthFilter || e.date.split("-")[1] === monthFilter) &&
        (!typeFilter || e.type.includes(typeFilter))
    );
    let filteredSales = sales.filter(s =>
        (!monthFilter || s.date.split("-")[1] === monthFilter)
    );

    let expensesTable = document.getElementById("expensesTable");
    expensesTable.innerHTML = "";
    filteredExpenses.forEach(e => {
        expensesTable.innerHTML += `<tr><td>${e.id}</td><td>${e.name}</td><td>${e.type}</td><td>${e.amount}</td><td>${e.date}</td></tr>`;
    });

    let salesTable = document.getElementById("salesTable");
    salesTable.innerHTML = "";
    filteredSales.forEach(s => {
        salesTable.innerHTML += `<tr><td>${s.amount}</td><td>${s.date}</td></tr>`;
    });

    let totalExp = filteredExpenses.reduce((sum, e) => sum + e.amount, 0);
    let totalSal = filteredSales.reduce((sum, s) => sum + s.amount, 0);
    document.getElementById("totalExpenses").textContent = "ุฅุฌูุงูู ุงููุตุงุฑูู: " + totalExp;
    document.getElementById("totalSales").textContent = "ุฅุฌูุงูู ุงููุจูุนุงุช: " + totalSal;
    document.getElementById("netProfit").textContent = "ุงูุฑุจุญ ุงูุตุงูู: " + (totalSal - totalExp);

    drawChart(filteredExpenses, filteredSales);
}

function drawChart(expenses, sales) {
    let ctx = document.getElementById("chart").getContext("2d");
    let labels = [...new Set([...expenses.map(e => e.date), ...sales.map(s => s.date)])].sort();
    let expData = labels.map(date => expenses.filter(e => e.date === date).reduce((sum, e) => sum + e.amount, 0));
    let salData = labels.map(date => sales.filter(s => s.date === date).reduce((sum, s) => sum + s.amount, 0));

    new Chart(ctx, {
        type: 'line',
        data: {
            labels: labels,
            datasets: [
                { label: 'ุงููุตุงุฑูู', data: expData, borderColor: 'red', fill: false },
                { label: 'ุงููุจูุนุงุช', data: salData, borderColor: 'green', fill: false }
            ]
        }
    });
}

renderData();
</script>

</body>
</html>
